<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quick Quote Notes</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        header {
            text-align: center;
            margin-bottom: 30px;
        }
        h1 {
            color: #2c3e50;
            margin-bottom: 5px;
        }
        .subtitle {
            color: #7f8c8d;
            font-style: italic;
        }
        .form-section {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }
        input[type="text"], input[type="date"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        input[type="checkbox"] {
            margin-right: 10px;
            transform: scale(1.2);
        }
        .output-section {
            background-color: #2c3e50;
            color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: background-color 0.3s;
            margin-bottom: 20px;
        }
        .output-section:hover {
            background-color: #34495e;
        }
        .output-section:active {
            background-color: #1a252f;
        }
        .output-text {
            white-space: pre-line;
            line-height: 1.5;
            font-size: 16px;
        }
        .copy-notice {
            text-align: center;
            margin-top: 10px;
            font-size: 14px;
            color: #bdc3c7;
        }
        .checkbox-group {
            display: flex;
            align-items: center;
        }
        .required {
            color: #e74c3c;
        }
        .disclaimer {
            text-align: center;
            color: #7f8c8d;
            font-size: 14px;
            margin-top: 10px;
            font-style: italic;
        }
    </style>
</head>
<body>
    <header>
        <h1>Quick Quote Notes</h1>
        <p class="subtitle">Fill in the information to generate copy text.</p>
    </header>

    <section class="form-section">
        <div class="form-group">
            <label for="author">Author: <span class="required">*</span></label>
            <input type="text" id="author" placeholder="Enter author name">
        </div>
        
        <div class="form-group">
            <label for="quoteTotal">Quote Total (after taxes, etc.): <span class="required">*</span></label>
            <input type="text" id="quoteTotal" placeholder="Enter amount">
        </div>
        
        <div class="form-group">
            <label for="discount">Discount:</label>
            <input type="text" id="discount" placeholder="Enter percentage">%
        </div>
        
        <div class="form-group">
            <div class="checkbox-group">
                <input type="checkbox" id="hero">
                <label for="hero">Hero?</label>
            </div>
        </div>
        
        <div class="form-group">
            <label for="financing">Financing:</label>
            <input type="text" id="financing" placeholder="Enter months" value="24"> months
        </div>
        
        <div class="form-group">
            <label for="expiration">Expiration Date: <span class="required">*</span></label>
            <input type="date" id="expiration">
        </div>
        
        <div class="form-group">
            <label for="customNote">Custom Note:</label>
            <input type="text" id="customNote" placeholder="Enter custom note">
        </div>
    </section>

    <section class="output-section" id="outputSection">
        <div class="output-text" id="outputText">Please fill in the required fields to generate the quote text.</div>
        <div class="copy-notice">Click to copy to clipboard</div>
    </section>

    <div class="disclaimer">Not affiliated with Lovesac</div>

    <script>
        // Get DOM elements
        const authorInput = document.getElementById('author');
        const quoteTotalInput = document.getElementById('quoteTotal');
        const discountInput = document.getElementById('discount');
        const heroCheckbox = document.getElementById('hero');
        const financingInput = document.getElementById('financing');
        const expirationInput = document.getElementById('expiration');
        const customNoteInput = document.getElementById('customNote');
        const outputText = document.getElementById('outputText');
        const outputSection = document.getElementById('outputSection');

        // Format number as currency
        function formatCurrency(amount) {
            return parseFloat(amount).toLocaleString('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            });
        }

        // Calculate days until expiration
        function getDaysUntilExpiration(expirationDate) {
            const today = new Date();
            today.setHours(0, 0, 0, 0); // Set to beginning of day for accurate day count
            
            const expDate = new Date(expirationDate);
            expDate.setHours(20, 0, 0, 0); // Set to beginning of day for accurate day count
            
            const diffTime = expDate - today;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            return diffDays;
        }

        // Format today's date
        function getFormattedToday() {
            const today = new Date();
            const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            const dayName = days[today.getDay()];
            const month = String(today.getMonth() + 1).padStart(2, '0');
            const day = String(today.getDate()).padStart(2, '0');
            const year = String(today.getFullYear()).slice(-2);
            return `${dayName}. ${month}/${day}/${year}`;
        }

        // Calculate monthly payment (without applying discount)
        function calculateMonthlyPayment(total, months) {
            return Math.round(total / months);
        }

        // Format date as MM/DD/YY (fixed timezone issue)
        function formatDate(dateString) {
            const date = new Date(dateString);
            // Add timezone offset to prevent date shifting
            const timezoneOffset = date.getTimezoneOffset() * 60000;
            const adjustedDate = new Date(date.getTime() + timezoneOffset);
            
            const month = adjustedDate.getMonth() + 1;
            const day = adjustedDate.getDate();
            const year = adjustedDate.getFullYear().toString().slice(-2);
            return `${month}/${day}/${year}`;
        }

        // Update output text
        function updateOutput() {
            const author = authorInput.value || '';
            const quoteTotal = parseFloat(quoteTotalInput.value) || 0;
            const discount = parseFloat(discountInput.value) || 0;
            const isHero = heroCheckbox.checked;
            const financing = parseInt(financingInput.value) || 0;
            const expirationDate = expirationInput.value;
            const customNote = customNoteInput.value;
            
            // Check if required fields are filled
            if (!author || !quoteTotal || !expirationDate) {
                outputText.textContent = 'Please fill in the required fields to generate the quote text.';
                return;
            }
            
            // Calculate values
            const monthlyPayment = financing > 0 ? calculateMonthlyPayment(quoteTotal, financing) : 0;
            const daysUntilExpiration = getDaysUntilExpiration(expirationDate);
            const todayFormatted = getFormattedToday();
            const formattedExpDate = formatDate(expirationDate);
            
            // Build output text
            let output = '';
            
            // Custom note if provided
            if (customNote) {
                output += `(${customNote}) `;
            }
            
            // Price section
            output += `[ ${formatCurrency(quoteTotal)}`;
            
            // Add monthly payment if financing is specified
            if (financing > 0) {
                output += ` or $${monthlyPayment} per mo. for ${financing} mos.`;
            }
            
            // Add discount if specified
            if (discount > 0) {
                output += ` after ${discount}% off`;
            }
            
            // Add Heroes Code if checked
            if (isHero) {
                output += ' with Heroes Code**';
            }
            
            output += ' ]   ';
            
            // Expiration section
            output += `(!!) EXPIRES in ${daysUntilExpiration} days on ${formattedExpDate} (!!)   `;
            
            // Heroes message if checked
            if (isHero) {
                output += '**Visit LOVESAC.COM/HEROES to apply!   ';
            }
            
            // Author section
            output += `—Author: ${author} on ${todayFormatted}**—`;
            
            outputText.textContent = output;
        }

        // Copy to clipboard functionality
        outputSection.addEventListener('click', function() {
            const textToCopy = outputText.textContent;
            
            // Don't copy if it's the placeholder text
            if (textToCopy.includes('Please fill in')) {
                return;
            }
            
            // Create a temporary textarea element to copy from
            const textarea = document.createElement('textarea');
            textarea.value = textToCopy;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
            
            // Show visual feedback
            const originalText = outputSection.querySelector('.copy-notice').textContent;
            outputSection.querySelector('.copy-notice').textContent = 'Copied to clipboard!';
            
            setTimeout(() => {
                outputSection.querySelector('.copy-notice').textContent = originalText;
            }, 2000);
        });

        // Add event listeners for live updates
        const inputs = [authorInput, quoteTotalInput, discountInput, heroCheckbox, 
                       financingInput, expirationInput, customNoteInput];
        
        inputs.forEach(input => {
            if (input.type === 'checkbox') {
                input.addEventListener('change', updateOutput);
            } else {
                input.addEventListener('input', updateOutput);
            }
        });

        // Initial update
        updateOutput();
    </script>
</body>
</html>
